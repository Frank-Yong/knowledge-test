# OperatingContextMcp Session Log

- Timestamp: 2026-02-25 20:42:15 (local)
- Source repo: operating-context-mcp
- Branch: phase-2-mcp-handshake
- Trigger: review fix + `log it`

## Change implemented

### Exact Content-Length header parsing
- File: `src/OperatingContextMcp.Server/Worker.cs`
- Updated `ParseContentLength` to require exact header-name match.
- Previous behavior accepted any header beginning with `Content-Length` (e.g., `Content-LengthX`).
- New behavior:
  - splits each header line at `:`
  - requires exactly two parts
  - requires header name equals `Content-Length` (case-insensitive)
  - then parses numeric value

## Why this matters
- Prevents malformed header names from being accepted as valid framing metadata.
- Tightens protocol parser correctness and reduces ambiguous frame handling.

## Validation
- Command: `dotnet build src/OperatingContextMcp.sln`
- Result: succeeded.

## Status snapshot
- Continuing post-PR hardening for Phase 2 MCP transport.
- Remaining roadmap backlog unchanged (`knowledge_search`, `knowledge_refresh`).
