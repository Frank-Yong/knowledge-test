# OperatingContextMcp Session Log

- Timestamp: 2026-02-26 05:31:17 (local)
- Source repo: operating-context-mcp
- Branch: phase-2-mcp-handshake
- Trigger: reviewer error-classification comment + `log it`

## Change implemented

### `tools/call` dispatcher failures mapped to JSON-RPC client error
- File: `src/OperatingContextMcp.Server/Worker.cs`
- Updated `CreateToolCallResultAsync` to catch `InvalidOperationException` from `RequestDispatcher.DispatchAsync(...)` and rethrow `InvalidParamsException` with safe message: `tools/call request is invalid.`
- This routes these failures through existing `HandleRequestAsync` invalid-params path and returns `-32602` instead of generic `-32000`.

## Why this matters
- Avoids misclassifying expected bad client input as internal server failure.
- Reduces warning-level noise for invalid tool calls and improves protocol correctness.

## Validation
- File diagnostics check for `Worker.cs`: no errors found.
- Command: `dotnet build src/OperatingContextMcp.sln`
- Result: succeeded.

## Status snapshot
- Addresses reviewer note for `tools/call` dispatch failure classification.
