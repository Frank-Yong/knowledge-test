# OperatingContextMcp Session Log

- Timestamp: 2026-02-26 05:59:29 (local)
- Source repo: operating-context-mcp
- Branch: phase-2-mcp-handshake
- Trigger: reviewer diagnostics comment + `log it`

## Change implemented

### Preserve dispatcher error details in `tools/call` invalid-params mapping
- File: `src/OperatingContextMcp.Server/Worker.cs`
- Updated `CreateToolCallResultAsync` dispatcher exception mapping:
  - from `catch (InvalidOperationException)` with generic message
  - to `catch (InvalidOperationException ex)` and rethrow `InvalidParamsException(ex.Message)`
- This preserves specific dispatcher diagnostics such as:
  - `Tool '{toolName}' is not registered.`
  - `No handler registered for tool '{toolName}'.`

## Why this matters
- Improves client/developer diagnostics without changing JSON-RPC error code mapping (`-32602`).
- Distinguishes different invalid invocation conditions in a single response path.

## Validation
- File diagnostics check for `Worker.cs`: no errors found.
- Command: `dotnet build src/OperatingContextMcp.sln`
- Result: succeeded.

## Status snapshot
- Addresses reviewer note about losing actionable context with overly generic `tools/call` invalid message.
